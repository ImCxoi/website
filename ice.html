<!DOCTYPE html>
<html>
    <head>
        <html lang="en"></html>
        <title>Cxoi.net</title>
        <h1 class="centered">(K)notty Generator</h1>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <meta name="color-scheme" content="light dark"/>
        <link rel="stylesheet" href="ice.css"/>
        <link rel="icon" type="image/png" href="images/ice.png"/>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
        <script src="https://lonekorean.github.io/highlight-within-textarea/jquery.highlight-within-textarea.js"></script>
    </head>
    <body">
        <div class="container">
            <div class="box"></div>
                <textarea type="text" class="textarea" name="plot" id="plot" placeholder="Enter text here" oninput="countWord()"></textarea>
            </div>
            <script>
                document.body.style.zoom="100%"
                var dict = ["can't","couldn't","don't","nonchalant","noncompliant","noncommittal","nonconformist","nonexistent","nonessential","nonfunctional","nonplussed","nonrenewable","nonresponsive","nonverbal","nonviolent","nobody","no","none","nor","not","notorious","nothing","nowhere","shouldn't","won't","wouldn't"];
                var editText = dict.map(i => 'xx' + i);          
                count = 0;

                $('.textarea').highlightWithinTextarea({
                    highlight: dict
                });

                function countWord() {
                    var text = document.getElementById("plot").value;
                    var regex = new RegExp(dict.join("|"), "gi");
                    var matches = text.match(regex) || [];
                    document.getElementById("show").innerHTML = matches.length;
                }

                function doWork() {
                    var text = document.getElementById("plot").value;
                    var regex = new RegExp(dict.join("|"), "gi");
                    var count = (text.match(regex) || []).length;
                    if (count > 0) {
                        var changeText = text.replace(regex, function(match) {return "xx" + match;});
                        $('.textarea').val(changeText);
                        $('.textarea').highlightWithinTextarea({
                            highlight: editText,
                        });
                    }
                    document.getElementById("show").innerHTML = count;
                }

                function togglestyle(test){
                    if(test.className === "on") {
                        
                        document.getElementById('btn').value = "Keep Formatting: ❌"
                        test.className="off";
                    } else {
                        
                        test.className="on";
                        document.getElementById('btn').value = "Keep Formatting: ✔️"
                    }
                }

            </script>  
        </body>
        <button type="button" class="buttongui" onclick="doWork()">Generate</button>
        <div class="count"> Word Count:
            
            <span id="show">0</span>
        </div>
    </body>
</html>