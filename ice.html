<html>
    <head>
        <html lang="en"></html>
        <title>Cxoi.net</title>
        <h1 class="centered">(K)notty Generator</h1>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <meta name="color-scheme" content="light dark"/>
        <link rel="stylesheet" href="ice.css"/>
        <link rel="icon" type="image/png" href="images/ice.png"/>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
        <script src="https://lonekorean.github.io/highlight-within-textarea/jquery.highlight-within-textarea.js"></script>
    </head>
    <body">
        <div class="container">
            <div class="box"></div>
                <textarea type="text" class="textarea" name="plot" id="plot" placeholder="Enter text here" oninput="countWord()"></textarea>
            </div>
            <script>
                var dict = ["not", "don't", "can't", "won't", "wouldn't", "couldn't", "shouldn't"];
                var editText = dict.map(i => 'xx' + i);
                $('.textarea').highlightWithinTextarea({
                    highlight: editText
                });
                function countWord() {
                    var Text = $('.textarea').val()
                    
                    
                contains = dict.some(element => {
                    if (Text.includes(element)) {
                        var changeText = Text.replaceAll(" " + element + " ", " xx" + element + " ")
                        $('.textarea').val(changeText);
                    }
                });

                
                var words = document
                    .getElementById("plot").value;
                var count = 0;
                var split = words.split(' ');
                for (var i = 0; i < split.length; i++) {
                    if (split[i] != "") {
                        ele = document.getElementsByClassName("hwt-highlights hwt-content")[0]
                        if (ele.getElementsByTagName('mark').item(i)) {
                            count += 1;
                        } 
                    }
                }
                document.getElementById("show")
                    .innerHTML = count;
                }
            </script>  
        </body>
        <div class="count"> Word Count:
            <span id="show">0</span>
        </div>
    </body>
</html>